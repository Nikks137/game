<!DOCTYPE html>
<html lang="en">
<head>
  <title>rock, paper and scissors</title>
  <link rel="stylesheet" href="game.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bitcount+Prop+Double+Ink:wght@100..900&family=Doto:wght@100..900&display=swap" rel="stylesheet">


</head>
<body>
  <div class="name">rock, paper and scissors</div>
  <div class="main">
    <div class="stone"><img class="element" src="stone.png" alt="rock"
      onclick="
        let comchoice = RandomNumber();
        let resultmsg = getResult('rock' , comchoice);
        display('rock', comchoice, resultmsg);
        
        "
      ></div>
    <div class="paper"><img class="element"  src="paper.png" alt="paper"
      onclick="
         comchoice = RandomNumber();
         resultmsg = getResult('paper' , comchoice);
        display('paper', comchoice, resultmsg);
        
        
        
        "      
      ></div>
    <div class="scissor"><img class="element"  src="sessior.png" alt="sessior"
      onclick="
         comchoice = RandomNumber();
         resultmsg = getResult('sessior' , comchoice);
        display('sessior', comchoice, resultmsg);
        
          "></div>
  </div>
      <div class="display">
      <div id="user"></div>
      <div id="computer"></div>
      <div id="result"></div>
      </div>
      <div class="record"></div>
      <div id="reset_button"><button class="img_button" 
      onclick="localStorage.clear()
      resetScore();"
      ><img class="reset" src="rotate.png" alt="reset"></button></div>

  <script>

    let scoreStr = localStorage.getItem('Score');
    let score;
    resetScore(scoreStr);

    function resetScore(scoreStr) {
      score = scoreStr ? JSON.parse(scoreStr) : {
        won: 0,
        lost: 0,
        tie: 0,
      };

      score.displayScore = function() {
        return `Score: Won:${score.won}, Lost:${score.lost}, Tie: ${score.tie}`;
      };
      display();

    
    }
        // let store = {
        //   won: 0,
        //   lost: 0,
        //   tie: 0,
          
        //   displayScore: function(){
        //     return `won: ${store.won}
        //       lost: ${store.lost}
        //       tie: ${store.tie}`
        //   },

        // };

    

      function RandomNumber(){
        let comNumber = Math.random() * 3;
        if (comNumber > 0 && comNumber <= 1){
          return 'rock';
        } else if (comNumber >1 && comNumber <= 2){
          return  'paper';
        } else {
          return  'sessior'
        }
      }

      function getResult(usermove , computermove){
        if(usermove === 'rock')
          if(computermove === 'rock'){
            score.tie++;
            return `it's a tie`;
          } else if(computermove === 'paper'){
            score.lost++;
            return `computer won`;
          } else {
            score.won++;
            return `user won`;
          }
        else if(usermove === 'paper')
          if(computermove === 'rock'){
            score.won++;
            return `user won`;
          } else if(computermove === 'paper'){
            score.tie++;
            return `it's a tie`;
          } else {
            score.lost++
            return `computer won`;
          }  
        else 
          if(computermove === 'rock'){
            score.lost++;
            return `computer won`;
          } else if(computermove === 'paper'){
            score.won++;
            return `user won`;
          } else {
            score.tie++;
            return `it's a tie`;
          }
      }

      function display(usermove , computermove , getResult){
        localStorage.setItem('Score', JSON.stringify(score));

        document.querySelector('#user').innerText = usermove ? `user choice : ${usermove}` : '';
        document.querySelector('#computer').innerText = computermove ? `computer choice : ${computermove}` : '';
        document.querySelector('#result').innerText = getResult || '';
        document.querySelector('.record').innerText = score.displayScore();
      }
      
      // function display(usermove , computermove , GameResult){
      //   alert(`       user choice is ${usermove} and computer choice is ${computermove} and
                   
      //         ~~~~~~~~~~~~${GameResult}~~~~~~~~~~~~~


      //         ${store.displayScore()}
      //   `)
      // }
  </script>
</body>
</html>